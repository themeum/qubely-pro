jQuery(document).ready(function(e){function t(e){return e<10?"0"+e:e}function r(e){let t=e.parents(".qubely-form-timepicker-wrapper").find(".qubely-time-picker"),r=JSON.parse(e.parents(".qubely-form-timepicker-wrapper").find(".qubely-form-timepicker")[0].dataset.options).timeFormatType,i=e.parents(".qubely-form-timepicker-wrapper").find(".qubely-form-timepicker-hour")[0].innerText,n=e.parents(".qubely-form-timepicker-wrapper").find(".qubely-form-timepicker-minute")[0].innerText,a=12===r?e.parents(".qubely-form-timepicker-wrapper").find(".qubely-form-time-format")[0].innerText:null;t.val(`${i}:${n}${12===r?` ${a}`:""}`)}function i(t){const r=atob(t.find('input[name="field-error-message"]').val());let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=!1;return t.find(" input[type=text],input[type=number], input[type=email], input[type=radio], input[type=checkbox], textarea, select").each(function(){if(!0===i)e(this).on("change keyup",function(){if(a=n(e(this),r))return!1});else if(a=n(e(this),r))return!1}),a}function n(e,t){let r=!1;const i=e.parents(".qubely-form-field-wrapper");t=`<p class="qubely-form-required-field"> ${t}</p>`,confirmEmailErrorMessage="<p class='qubely-form-confirmation-email-error'> Email doesn't match</p>";const n=0===i.find("p.qubely-form-required-field").length;if(void 0!==e.prop("required")){if("email"===e.attr("type")){const r=e.parents(".qubely-form-field-wrapper");if(r.find(".qubely-form-confirmation-email").length>0){let o=0===r.find(".qubely-form-confirmation-email-error").length;return a(e.val())?r.find("p.qubely-form-required-field").remove():n&&i.append(t),r.find(".qubely-form-field.qubely-form-email")[0].value===e[0].value?(r.find("p.qubely-form-confirmation-email-error").remove(),!1):(o&&i.append(confirmEmailErrorMessage),!0)}if(!a(e.val()))return n&&i.append(t),!0}0===e.val().length&&(n&&i.append(t),r=!0),e.val().length>0&&(i.find("p.qubely-form-required-field").remove(),r=!1)}if("radio"===e.attr("type")||"checkbox"===e.attr("type")){const a=e.parent().parent();"true"==a.attr("data-required")&&(0===a.find("input:checked").length?(n&&i.append(t),r=!0):(i.find("p.qubely-form-required-field").remove(),r=!1))}return r}function a(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}e(document).click(function(t){$target=e(t.target),$target.parents(".qubely-form-timepicker.qubely-active").length||$target.hasClass("qubely-time-picker")||e(".qubely-form-timepicker.qubely-active").removeClass("qubely-active")}),e(".qubely-datepicker").length>0&&e(".qubely-datepicker").each(function(){let t=JSON.parse(e(this).parent()[0].dataset.options).dateFormat;e(this).datepicker({dateFormat:t,duration:"fast",changeMonth:!0,changeYear:!0,separator:" T "})}),e(".qubely-time-picker").on("click",function(t){let i=e(this).parent();i.find(".qubely-form-timepicker.qubely-active").length>0?i.find(".qubely-form-timepicker.qubely-active").removeClass("qubely-active"):(i.find(".qubely-form-timepicker").addClass("qubely-active"),r(e(this)))}),e(".qubely-hourformat-button").on("click",function(t){let i=e(this).parent(),n=i.find(".qubely-form-time-format")[0].innerText;i.find(".qubely-form-time-format")[0].innerText="PM"===n?"AM":"PM",r(i)}),e(".qubely-minute-button-up").on("click",function(i){let n=e(this).parent(),a=n.parent();const{minuteInterval:o,timeFormatType:l}=JSON.parse(a[0].dataset.options);let u=n.find(".qubely-form-timepicker-minute")[0].innerText,m=12===l?a.find(".qubely-form-time-format")[0].innerText:null,f=parseInt(a.find(".qubely-form-timepicker-hour")[0].innerText);u>=60-parseInt(o)?(12===l&&11===f&&(a.find(".qubely-form-time-format")[0].innerText="AM"===m?"PM":"AM"),a.find(".qubely-form-timepicker-hour")[0].innerText=t(f===l?12===l?1:0:f+1),n.find(".qubely-form-timepicker-minute")[0].innerText=t((parseInt(u)+parseInt(o))%60)):n.find(".qubely-form-timepicker-minute")[0].innerText=t(parseInt(u)+parseInt(o)),r(n)}),e(".qubely-minute-button-down").on("click",function(i){let n=e(this).parent(),a=n.parent();const{minuteInterval:o,timeFormatType:l}=JSON.parse(a[0].dataset.options);let u=n.find(".qubely-form-timepicker-minute")[0].innerText,m=12===l?a.find(".qubely-form-time-format")[0].innerText:null,f=parseInt(a.find(".qubely-form-timepicker-hour")[0].innerText);u<parseInt(o)?(12===l&&12===f&&(a.find(".qubely-form-time-format")[0].innerText="AM"===m?"PM":"AM"),a.find(".qubely-form-timepicker-hour")[0].innerText=t(12===l?1===f?l:f-1:0===f?l:f-1),n.find(".qubely-form-timepicker-minute")[0].innerText=t(u-o==0?0:u-o+60)):n.find(".qubely-form-timepicker-minute")[0].innerText=t(parseInt(u)-parseInt(o)),r(n)}),e(".qubely-hour-button-up").on("click",function(i){let n=e(this).parent(),a=n.parent();const{timeFormatType:o}=JSON.parse(a[0].dataset.options);let l=12===o?a.find(".qubely-form-time-format")[0].innerText:null,u=parseInt(a.find(".qubely-form-timepicker-hour")[0].innerText);12===o&&11===u&&(a.find(".qubely-form-time-format")[0].innerText="AM"===l?"PM":"AM"),a.find(".qubely-form-timepicker-hour")[0].innerText=t(u===o?12===o?1:0:u+1),r(n)}),e(".qubely-hour-button-down").on("click",function(i){let n=e(this).parent(),a=n.parent();const{timeFormatType:o}=JSON.parse(a[0].dataset.options);let l=12===o?a.find(".qubely-form-time-format")[0].innerText:null,u=parseInt(a.find(".qubely-form-timepicker-hour")[0].innerText);12!==o||12!==u&&1!==u||(a.find(".qubely-form-time-format")[0].innerText="AM"===l?"PM":"AM"),a.find(".qubely-form-timepicker-hour")[0].innerText=t(12===o&&1===u||23===o&&0===u?o:u-1),r(n)}),e(".qubely-block-form form.qubely-form:not(.qubely-form-ready)").each(function(){const t=e(this);t.addClass("qubely-form-ready"),t.find("input.qubely-form-field").on("keydown",e=>{if(13===e.which)return e.preventDefault(),!1}),i(t,!0),t.submit(e=>{e.preventDefault();let r=t.serializeArray();i(t)||(r.push({name:"captcha",value:"undefined"!=typeof grecaptcha?grecaptcha.getResponse():void 0}),jQuery.ajax({url:qubely_urls.ajax+"?action=qubely_send_form_data",type:"POST",data:r,beforeSend:()=>{t.find('button[type="submit"]').addClass("disable").attr("disabled",!0),t.find(".qubely-form-message").html('<div class="qubely-alert qubely-alert-info">Message sending...</div>')},success:e=>{t.find('button[type="submit"]').removeClass("disable").attr("disabled",!1),t.find(".qubely-form-message").html(`<div class="qubely-alert qubely-alert-success">${e.data.msg}</div>`),setTimeout(()=>t.find(".qubely-form-message").html(""),4e3),1==e.data.status&&t.trigger("reset")},error:(e,r,i)=>{t.find('button[type="submit"]').removeClass("disable").attr("disabled",!1),t.find(".qubely-form-message").html(`<div class= "qubely-alert qubely-alert-danger" > ${r} : ${i} - ${e.responseJSON}</div> `)}}))})})});